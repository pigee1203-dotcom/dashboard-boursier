<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dashboard Boursier — Desktop Glass Pro</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@3.0.0/dist/chartjs-chart-financial.min.js"></script>

<style>
/* ======= THEME: Desktop Glass (light) with pale green accents ======= */
:root {
    /* Nouvelle Palette de Couleurs */
    --primary: #2c776e;      /* Vert-bleu foncé (professionnel) */
    --accent: #4CAF50;       /* Vert pour la hausse */
    --danger: #f44336;       /* Rouge pour la baisse */
    --bg-light: #f9fbfd;     /* Fond très clair */
    --shadow-soft: 0 4px 12px rgba(0,0,0,0.08); /* Ombre douce */
    --text-muted: #6b7280;   /* Gris pour les textes secondaires */
    --card-radius: 12px;
    font-family: 'Roboto', Arial, sans-serif; /* Police claire et lisible */
}

body {
    font-family: var(--font-family);
    background-color: var(--bg-light);
    background: linear-gradient(180deg, var(--bg-light), #e6f0f2); /* Dégradé doux */
    margin: 0;
    padding: 20px;
    color: #1f2937; /* Texte très foncé */
}
.container{
    max-width: 1400px;
    margin: 0 auto;
}

/* ------------------------------------- */
/* --- BOUTONS / INPUTS --- */
/* ------------------------------------- */

button, .btn {
    padding: 8px 12px;
    margin-left: 5px;
    cursor: pointer;
    border-radius: 6px;
    border: 1px solid #ccc;
    background-color: #fff;
    transition: all 0.2s;
    font-weight: 600;
}
button:hover, .btn:hover {
    background-color: #e0e0e0;
    border-color: #9ca3af;
}

/* Boutons d'action principale */
.btn.primary {
    background: var(--primary);
    color: white;
    border: none;
}
.btn.primary:hover {
    background: #1e5a51;
}

.controls input, .controls select, .small-input {
    padding: 8px 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
    background-color: white;
}

/* ------------------------------------- */
/* --- MISE EN PAGE / SECTIONS --- */
/* ------------------------------------- */

.grid {
    display: grid;
    grid-template-columns: 360px 1fr;
    gap: 24px; /* Augmenté l'espacement pour l'aération */
    margin-top: 24px;
    align-items: start;
}
@media (max-width:1100px){
    .grid{ grid-template-columns:1fr; }
}
.left{ order:1; } /* Correction: left/right dans le HTML est l'inverse du CSS original */
.right{ order:2; }

.section, .chart-card, .panel {
    background: white;
    padding: 20px; /* Augmenté le padding pour l'aération */
    margin: 0;
    border-radius: var(--card-radius);
    box-shadow: var(--shadow-soft); /* Ombre douce */
    border: 1px solid #e5e7eb; /* Bordure légère */
}
</style>

<style>
.ticker-item {
    background: #fcfcfc;
    padding: 12px;
    margin: 8px 0;
    border-radius: 8px;
    border: 1px solid #f3f4f6;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}
.ticker-item:hover {
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    transform: translateY(-1px);
}

/* ------------------------------------- */
/* --- COULEURS DES DONNÉES --- */
/* ------------------------------------- */

.ticker-item.up { border-left: 6px solid var(--accent); } 
.ticker-item.down { border-left: 6px solid var(--danger); } 

.ticker-price.up { color: #05603a !important; font-weight: 700; font-size: 1.1em; } /* Utilisation de la couleur directement pour la clarté */
.ticker-price.down { color: #7f1d1d !important; font-weight: 700; font-size: 1.1em; } /* Utilisation de la couleur directement pour la clarté */

.ticker-meta {
    font-size: 12px;
    color: var(--text-muted);
}

.ticker-symbol {
    font-size: 16px;
    font-weight: 800;
}

/* Pop-up Alerte (Amélioré) */
.popup {
    position:fixed;
    right:22px;
    bottom:22px;
    z-index:1500;
    min-width:280px;
    padding:14px;
    border-radius:10px;
    background:linear-gradient(90deg, var(--accent), #10b981);
    color:white;
    font-weight:700;
    box-shadow:var(--shadow-soft);
}
</style>
</head>

<body>
<div class="container">
    <div style="display:flex;justify-content:flex-end;gap:12px;align-items:center;padding:0 20px 20px 0;">
    <select id="currencySelect" class="small-input" onchange="state.currency = this.value; refreshAll(); loadChartFor(document.getElementById('chartTitle').textContent.split(' ')[0])">
      <option value="EUR">€ EUR</option>
      <option value="USD">$ USD</option>
      <option value="CAD">$ CAD</option>
    </select>
    <select id="rangeSelect" class="small-input" onchange="loadChartFor(document.getElementById('chartTitle').textContent.split(' ')[0])">
      <option value="1mo">1 Mois</option>
      <option value="3mo">3 Mois</option>
      <option value="6mo">6 Mois</option>
      <option value="1y">1 An</option>
    </select>
  </div>
    <div class="grid">
        <div class="left">
      <div class="section">          
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div><strong>Watchlist</strong><div style="font-size:12px;color:var(--text-muted)">Tout est mis à jour automatiquement</div></div>
          <div style="display:flex;gap:8px;align-items:center">
            <input id="addTickerInput" placeholder="Ajouter (ex: AAPL)" class="small-input">
            <button class="btn" onclick="addTickerFromInput()">Ajouter</button>
          </div>
        </div>
        <div class="watchlist-list" id="watchlistList"></div>
      </div>
      <div class="section" style="margin-top:12px">
